{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/refresh-reducer.ts"],"names":["fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleExternalUrl","handleMutable","CacheStates","fillLazyItemsTillLeafWithHead","refreshReducer","state","action","cache","mutable","origin","href","canonicalUrl","isForCurrentTree","JSON","stringify","previousTree","tree","data","URL","nextUrl","flightData","canonicalUrlOverride","pushRef","pendingPush","currentTree","flightDataPath","length","console","log","treePatch","newTree","Error","canonicalUrlOverrideHref","undefined","subTreeData","head","slice","status","READY","prefetchCache","Map","patchedTree"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,2BAA0B;AAC9D,SAASC,wBAAwB,QAAQ,iCAAgC;AACzE,SAASC,eAAe,QAAQ,uBAAsB;AACtD,SAASC,iBAAiB,QAAQ,0BAAyB;AAC3D,SAASC,2BAA2B,QAAQ,sCAAqC;AACjF,SAASC,2BAA2B,QAAQ,sCAAqC;AAMjF,SAASC,iBAAiB,QAAQ,qBAAoB;AACtD,SAASC,aAAa,QAAQ,oBAAmB;AACjD,SAASC,WAAW,QAAQ,4CAA2C;AACvE,SAASC,6BAA6B,QAAQ,yCAAwC;AAEtF,OAAO,SAASC,eACdC,KAA2B,EAC3BC,MAAqB,EACP;IACd,MAAM,EAAEC,MAAK,EAAEC,QAAO,EAAEC,OAAM,EAAE,GAAGH;IACnC,MAAMI,OAAOL,MAAMM,YAAY;IAE/B,MAAMC,mBACJC,KAAKC,SAAS,CAACN,QAAQO,YAAY,MAAMF,KAAKC,SAAS,CAACT,MAAMW,IAAI;IAEpE,IAAIJ,kBAAkB;QACpB,OAAOX,cAAcI,OAAOG;IAC9B,CAAC;IAED,IAAI,CAACD,MAAMU,IAAI,EAAE;QACf,uDAAuD;QACvD,wCAAwC;QACxCV,MAAMU,IAAI,GAAGtB,yBACXD,oBACE,IAAIwB,IAAIR,MAAMD,SACd;YAACJ,MAAMW,IAAI,CAAC,EAAE;YAAEX,MAAMW,IAAI,CAAC,EAAE;YAAEX,MAAMW,IAAI,CAAC,EAAE;YAAE;SAAU,EACxDX,MAAMc,OAAO;IAGnB,CAAC;IACD,MAAM,CAACC,YAAYC,qBAAqB,GAAGzB,gBAAgBW,MAAMU,IAAI;IAErE,4DAA4D;IAC5D,IAAI,OAAOG,eAAe,UAAU;QAClC,OAAOpB,kBACLK,OACAG,SACAY,YACAf,MAAMiB,OAAO,CAACC,WAAW;IAE7B,CAAC;IAED,2DAA2D;IAC3DhB,MAAMU,IAAI,GAAG,IAAI;IAEjB,IAAIO,cAAcnB,MAAMW,IAAI;IAE5B,KAAK,MAAMS,kBAAkBL,WAAY;QACvC,oFAAoF;QACpF,IAAIK,eAAeC,MAAM,KAAK,GAAG;YAC/B,oCAAoC;YACpCC,QAAQC,GAAG,CAAC;YACZ,OAAOvB;QACT,CAAC;QAED,2GAA2G;QAC3G,MAAM,CAACwB,UAAU,GAAGJ;QACpB,MAAMK,UAAUhC,4BACd,sBAAsB;QACtB;YAAC;SAAG,EACJ0B,aACAK;QAGF,IAAIC,YAAY,IAAI,EAAE;YACpB,MAAM,IAAIC,MAAM,oBAAmB;QACrC,CAAC;QAED,IAAIhC,4BAA4ByB,aAAaM,UAAU;YACrD,OAAO9B,kBAAkBK,OAAOG,SAASE,MAAML,MAAMiB,OAAO,CAACC,WAAW;QAC1E,CAAC;QAED,MAAMS,2BAA2BX,uBAC7BxB,kBAAkBwB,wBAClBY,SAAS;QAEb,IAAIZ,sBAAsB;YACxBb,QAAQG,YAAY,GAAGqB;QACzB,CAAC;QAED,0DAA0D;QAC1D,MAAM,CAACE,aAAaC,KAAK,GAAGV,eAAeW,KAAK,CAAC,CAAC;QAElD,8FAA8F;QAC9F,IAAIF,gBAAgB,IAAI,EAAE;YACxB3B,MAAM8B,MAAM,GAAGnC,YAAYoC,KAAK;YAChC/B,MAAM2B,WAAW,GAAGA;YACpB/B,8BACEI,OACA,4FAA4F;YAC5F0B,WACAJ,WACAM;YAEF3B,QAAQD,KAAK,GAAGA;YAChBC,QAAQ+B,aAAa,GAAG,IAAIC;QAC9B,CAAC;QAEDhC,QAAQO,YAAY,GAAGS;QACvBhB,QAAQiC,WAAW,GAAGX;QACtBtB,QAAQG,YAAY,GAAGD;QAEvBc,cAAcM;IAChB;IAEA,OAAO7B,cAAcI,OAAOG;AAC9B,CAAC"}