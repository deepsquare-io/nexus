{"version":3,"file":"wrapMiddlewareWithSentry.js","sources":["../../../src/edge/wrapMiddlewareWithSentry.ts"],"sourcesContent":["import type { EdgeRouteHandler } from './types';\nimport { withEdgeWrapping } from './utils/edgeWrapperUtils';\n\n/**\n * Wraps Next.js middleware with Sentry error and performance instrumentation.\n *\n * @param middleware The middleware handler.\n * @returns a wrapped middleware handler.\n */\nexport function wrapMiddlewareWithSentry<H extends EdgeRouteHandler>(\n  middleware: H,\n): (...params: Parameters<H>) => Promise<ReturnType<H>> {\n  return new Proxy(middleware, {\n    apply: async (wrappingTarget, thisArg, args: Parameters<H>) => {\n      return withEdgeWrapping(wrappingTarget, {\n        spanDescription: 'middleware',\n        spanOp: 'middleware.nextjs',\n        mechanismFunctionName: 'withSentryMiddleware',\n      }).apply(thisArg, args);\n    },\n  });\n}\n"],"names":["withEdgeWrapping"],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,SAAA,wBAAA;AACA,EAAA,UAAA;AACA,EAAA;AACA,EAAA,OAAA,IAAA,KAAA,CAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA,OAAA,cAAA,EAAA,OAAA,EAAA,IAAA,KAAA;AACA,MAAA,OAAAA,iCAAA,CAAA,cAAA,EAAA;AACA,QAAA,eAAA,EAAA,YAAA;AACA,QAAA,MAAA,EAAA,mBAAA;AACA,QAAA,qBAAA,EAAA,sBAAA;AACA,OAAA,CAAA,CAAA,KAAA,CAAA,OAAA,EAAA,IAAA,CAAA,CAAA;AACA,KAAA;AACA,GAAA,CAAA,CAAA;AACA;;;;"}